<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="http://jorisroovers.github.io/gitlint/contributing/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Contributing - Gitlint</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Contributing";
        var mkdocs_page_input_path = "contributing.md";
        var mkdocs_page_url = "/gitlint/contributing/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Gitlint
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../configuration/">Configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../rules/">Rules</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../contrib_rules/">Contrib Rules</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../user_defined_rules/">User Defined Rules</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Contributing</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#overall-guidelines">Overall Guidelines</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#releases">Releases</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#environment-setup">Environment setup</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#running-tests">Running tests</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#autoformatting-and-autofixing">Autoformatting and autofixing</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#packaging">Packaging</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tools">Tools</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#contrib-rules">Contrib rules</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="https://github.com/jorisroovers/gitlint/blob/main/CHANGELOG.md">Changelog</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Gitlint</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Contributing</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/jorisroovers/gitlint/edit/main/docs/contributing.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="contributing">Contributing</h1>
<p>We'd love for you to contribute to gitlint. Thanks for your interest!
The <a href="https://github.com/jorisroovers/gitlint">source-code and issue tracker</a> are hosted on Github.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Often it takes a while for us (well, actually just <a href="https://github.com/jorisroovers">me</a>) to get back to you
(sometimes up to a few months, this is a hobby project), but rest assured that we read your message and appreciate
your interest!
We maintain a <a href="https://github.com/users/jorisroovers/projects/1/">loose project plan on github projects</a>, but
that's open to a lot of change and input.</p>
</div>
<h2 id="overall-guidelines">Overall Guidelines</h2>
<p>When contributing code, please consider all the parts that are typically required:</p>
<ul>
<li><a href="https://github.com/jorisroovers/gitlint/tree/main/gitlint-core/gitlint/tests">Unit tests</a> (automatically
  <a href="https://github.com/jorisroovers/gitlint/actions">enforced by CI</a>). Please consider writing
  new ones for your functionality, not only updating existing ones to make the build pass.</li>
<li><a href="https://github.com/jorisroovers/gitlint/tree/main/qa">Integration tests</a> (also automatically
  <a href="https://github.com/jorisroovers/gitlint/actions">enforced by CI</a>). Again, please consider writing new ones
  for your functionality, not only updating existing ones to make the build pass.</li>
<li><a href="https://github.com/jorisroovers/gitlint/tree/main/docs">Documentation</a>.</li>
</ul>
<p>Since we want to maintain a high standard of quality, all of these things will have to be done regardless before code
can make it as part of a release. <strong>Gitlint commits and pull requests are gated on all of our tests and checks as well as
code-review</strong>. If you can already include them as part of your PR, it's a huge timesaver for us
and it's likely that your PR will be merged and released a lot sooner. </p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It's a good idea to open an issue before submitting a PR for non-trivial changes, so we can discuss what you have
in mind before you spend the effort. Thanks!</p>
</div>
<h2 id="releases">Releases</h2>
<p>Gitlint releases typically go out when there's either enough new features and fixes
to make it worthwhile or when there's a critical fix for a bug that fundamentally breaks gitlint.</p>
<p>While the amount of overhead of doing a release isn't huge, it's also not zero. In practice this means that it might
take weeks or months before merged code actually gets released - we know that can be frustrating but please
understand it's a well-considered trade-off based on available time.</p>
<h3 id="dev-builds">Dev Builds</h3>
<p>While final releases are usually months apart, we do dev builds on every commit to <code>main</code> that get published
to <strong>test.pypi.org</strong>:</p>
<ul>
<li><strong>gitlint</strong>: <a href="https://test.pypi.org/project/gitlint/#history">https://test.pypi.org/project/gitlint/#history</a></li>
<li><strong>gitlint-core</strong>:  <a href="https://test.pypi.org/project/gitlint-core/#history">https://test.pypi.org/project/gitlint-core/#history</a></li>
</ul>
<p>It usually takes about 15 min after merging a PR to <code>main</code> for new builds to show up. Note that the installation
of a recently published version can still fail for a few minutes after a build shows up on (test) PyPI while the package
is replicated to all download mirrors.</p>
<p>To install a dev build of gitlint:</p>
<pre><code class="language-sh">export VERSION=&quot;0.19.0.dev68&quot;
pip install --no-cache-dir -i https://test.pypi.org/simple/ --extra-index-url https://pypi.org/simple gitlint==$VERSION
# Explanation:
# --no-cache-dir: don't use local cache, this ensures pip checks for the latest version online
# --extra-index-url: use regular PyPI to download dependencies
</code></pre>
<h2 id="environment-setup">Environment setup</h2>
<h3 id="local-setup">Local setup</h3>
<p>Gitlint uses <a href="https://hatch.pypa.io/latest/">hatch</a> for project management.
You do not need to setup a <code>virtualenv</code>, hatch will take care of that for you.</p>
<pre><code class="language-sh">pip install hatch
</code></pre>
<h3 id="github-devcontainer">Github Devcontainer</h3>
<p>We provide a devcontainer on github to make it easier to get started with gitlint development using VSCode.</p>
<p>To start one, click the plus button under the <em>Code</em> dropdown on
<a href="https://github.com/jorisroovers/gitlint">the gitlint repo on github</a>. </p>
<p><strong>It can take ~15min for all post installation steps to finish.</strong></p>
<p><img alt="Gitlint Dev Container Instructions" src="../images/dev-container.png" /></p>
<p>By default we have python 3.11 installed in the dev container, but you can also use <a href="https://asdf-vm.com/">asdf</a>
(preinstalled) to install additional python versions:</p>
<pre><code class="language-sh"># Ensure ASDF overrides system python in PATH
# You can also append this line to your ~/.bash_profile in the devcontainer to have this happen automatically on login
source &quot;$(brew --prefix asdf)/libexec/asdf.sh&quot;

# Install python 3.9.15
asdf install python 3.9.15
# List all available python versions
asdf list all python
# List installed python versions
asdf list python
</code></pre>
<h2 id="running-tests">Running tests</h2>
<pre><code class="language-sh"># Gitlint
hatch run dev:gitlint            # run the local source copy of gitlint
hatch run dev:gitlint --version  # This is just the gitlint binary, any flag will work
hatch run dev:gitlint --debug       

# Unit tests
hatch run test:unit-tests        # run unit tests
hatch run test:unit-tests gitlint-core/gitlint/tests/rules/test_body_rules.py::BodyRuleTests::test_body_missing # run a single test
hatch run test:unit-tests -k test_body_missing_merge_commit # Run a specific tests using a pytest keyword expression
hatch run test:unit-tests-no-cov # run unit tests without test coverage

# Integration tests
hatch run qa:install-local       # One-time install: install the local gitlint source copy for integration testing
hatch run qa:integration-tests   # Run integration tests

# Formatting check (black)
hatch run test:format            # Run formatting checks

#  Linting (ruff)
hatch run test:lint              # Run Ruff

# Project stats
hatch run test:stats
</code></pre>
<h2 id="autoformatting-and-autofixing">Autoformatting and autofixing</h2>
<p>We use <a href="https://black.readthedocs.io/en/stable/">black</a> for code formatting.</p>
<pre><code class="language-sh">hatch run test:autoformat                              # format all python code
hatch run test:autoformat gitlint-core/gitlint/lint.py # format a specific file
</code></pre>
<p>We use <a href="https://github.com/charliermarsh/ruff">ruff</a> for linting, it can autofix many of the issue it finds
(although not always perfect).</p>
<pre><code class="language-sh">hatch run test:autofix                              # Attempt to fix linting issues
</code></pre>
<h2 id="documentation">Documentation</h2>
<p>We use <a href="https://www.mkdocs.org/">mkdocs</a> for generating our documentation from markdown.</p>
<p>To use it:</p>
<pre><code class="language-sh">hatch run docs:serve
</code></pre>
<p>Then access the documentation website on <a href="">http://localhost:8000</a>.</p>
<h2 id="packaging">Packaging</h2>
<p>Gitlint consists of 2 python packages: <a href="https://pypi.org/project/gitlint/">gitlint</a>
and <a href="https://pypi.org/project/gitlint-core/">gitlint-core</a>.</p>
<p>The <code>gitlint</code> package is just a wrapper package around <code>gitlint-core[trusted-deps]</code> which strictly pins gitlint
dependencies to known working versions.</p>
<p>There are scenarios where users (or OS package managers) may want looser dependency requirements.
In these cases, users can just install <code>gitlint-core</code> directly (<code>pip install gitlint-core</code>).</p>
<p><a href="https://github.com/jorisroovers/gitlint/issues/162">Issue 162</a> has all the background of how we got to the decision
to split gitlint in 2 packages.</p>
<p><img alt="Gitlint package structure" src="../images/gitlint-packages.png" /></p>
<p>To build the packages locally:</p>
<pre><code class="language-sh"># gitlint
hatch build
hatch clean # cleanup

# gitlint-core
cd gitlint-core
hatch build
hatch clean # cleanup
</code></pre>
<h2 id="tools">Tools</h2>
<p>We keep a small set of scripts in the <code>tools/</code> directory:</p>
<pre><code class="language-sh">tools/create-test-repo.sh            # Create a test git repo in your /tmp directory
tools/windows/create-test-repo.bat   # Windows: create git test repo
tools/windows/run_tests.bat          # Windows run unit tests
</code></pre>
<h2 id="contrib-rules">Contrib rules</h2>
<p>Since gitlint 0.12.0, we support <a href="../contrib_rules/">Contrib rules</a>: community contributed rules that are part of gitlint
itself. Thanks for considering to add a new one to gitlint!</p>
<p>Before starting, please read all the other documentation on this page about contributing first.
Then, we suggest taking the following approach to add a Contrib rule:</p>
<ol>
<li><strong>Write your rule as a <a href="../user_defined_rules/">user-defined rule</a></strong>. In terms of code, Contrib rules are identical to
   user-defined rules, they just happen to have their code sit within the gitlint codebase itself.</li>
<li><strong>Add your user-defined rule to gitlint</strong>. You should put your file(s) in the <a href="https://github.com/jorisroovers/gitlint/tree/main/gitlint-core/gitlint/contrib/rules">gitlint/contrib/rules</a> directory.</li>
<li><strong>Write unit tests</strong>. The gitlint codebase contains <a href="https://github.com/jorisroovers/gitlint/tree/main/gitlint-core/gitlint/tests/contrib/rules">Contrib rule test files you can copy and modify</a>.</li>
<li><strong>Write documentation</strong>. In particular, you should update the <a href="https://github.com/jorisroovers/gitlint/blob/main/docs/contrib_rules.md">gitlint/docs/contrib_rules.md</a> file with details on your Contrib rule.</li>
<li><strong>Create a Pull Request</strong>: code review typically requires a bit of back and forth. Thanks for your contribution!</li>
</ol>
<h3 id="contrib-rule-requirements">Contrib rule requirements</h3>
<p>If you follow the steps above and follow the existing gitlint conventions wrt naming things, you should already be fairly close to done.</p>
<p>In case you're looking for a slightly more formal spec, here's what gitlint requires of Contrib rules.</p>
<ul>
<li>Since Contrib rules are really just user-defined rules that live within the gitlint code-base, all the <a href="../user_defined_rules/#rule-requirements">user-rule requirements</a> also apply to Contrib rules.</li>
<li>All contrib rules <strong>must</strong> have associated unit tests. We <em>sort of</em> enforce this by a unit test that verifies that there's a
  test file for each contrib file.</li>
<li>All contrib rules <strong>must</strong> have names that start with <code>contrib-</code>. This is to easily distinguish them from default gitlint rules.</li>
<li>All contrib rule ids <strong>must</strong> start with <code>CT</code> (for LineRules targeting the title), <code>CB</code> (for LineRules targeting the body) or <code>CC</code> (for CommitRules). Again, this is to easily distinguish them from default gitlint rules.</li>
<li>All contrib rules <strong>must</strong> have unique names and ids.</li>
<li>You <strong>can</strong> add multiple rule classes to the same file, but classes <strong>should</strong> be logically grouped together in a single file that implements related rules.</li>
<li>Contrib rules <strong>should</strong> be meaningfully different from one another. If a behavior change or tweak can be added to an existing rule by adding options, that should be considered first. However, large <a href="https://en.wikipedia.org/wiki/God_object">god classes</a> that implement multiple rules in a single class should obviously also be avoided.</li>
<li>Contrib rules <strong>should</strong> use <a href="../user_defined_rules/#options">options</a> to make rules configurable.</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../user_defined_rules/" class="btn btn-neutral float-left" title="User Defined Rules"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/jorisroovers/gitlint" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../user_defined_rules/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../extra.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
